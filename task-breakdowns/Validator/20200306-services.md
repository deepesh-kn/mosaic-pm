# Services
**Please note that this is a draft version**

TODO: Description to be updated

- CommitteeCooldownService
    - This service is triggered by
        - Committee model.
        - Member model.
    - This service does the following:
        - Checks if the `status` of committee model is `OPEN`.
        - Get the member counts from the member model. It should be equal to the `size` of committee mode.
        - Checks if the entered members are exactly as per the distance then, This will insert a new record in the `CommitteeCooldownModel`
        - If the entered member is not as per the expection, add a record in `CommitteeSubmitSealedCommitModel`
     
- ActivateCommitteeService
    - This service is triggered by
        - Committee model.
    - This service does the following:
        - Checks if the `status` of the committee model is `COOLDOWN`.
        - This will insert a new record in the `CommitteeSubjectiveModel` for activateCommittee by storing the activationBlockHeight;
        
- SubmitSealedCommitService
    - This service is triggered by
        - Committee model.
    - This service does the following:
        - Checks if the `status` of the committee model is `COMMIT_PHASE`.
        - Calculates the position. (TODO: how to calculate this)
        - This will insert a new record in the `CommitteeSubmitSealedCommitModel`.
- CloseCommitPhaseService
    - This service is triggered by
        - Committee model
    - This service does the following:
        - Checks if the `status` of the committee model is `COMMIT_PHASE`.
        - This will insert a new record in the `CommitteeCloseCommitPhaseModel`
- RevealCommitService
    - This service is triggered by 
        - Committee model
    - This service does the following:
        - Checks if the `status` of the committee model is `REVEAL_PHASE`
        - This will insert a new record in the `CommitteeRevealCommitModel`
- CommitMetablockService
    - This service is triggered by
        - Metablock model
    - This service does the following:
        - Checks if the `round` of Metablock is `CommitteeDecided`
        - This will insert a new record in the `CommitMetablockModel` 
- CommitCheckpointService
    - This service is triggered by:
        - Kernel
    - This service deos the following:
        - Checks if the kernel status is `Coopened` for the current kernel height
        - This will insert a new record in the `CommitCheckpointModel` 
- ~~FinaliseCheckpointService~~
- ObserveBlockService
    - This service is triggered by
        - Link
    - This service does the following:
        - Checks if the `targetFinalizationStatus` of the Link is `Finalized`
        - This will insert a new record in the `ObserveBlockModel`.
- ~~PrecommitMetablockService~~
- FormCommitteeService
    - This service is triggered by
        - Metablock
    - This service does the following:
        - Checks if the `round` in Metablock is `Precommitted`.
        - This will insert a new record in the `FormCommitteeModel`
- EnterCommitteeService
    - This service is triggered by
        - Metablock
    - This service does the following:
        - Checks if the `round` in the Metablock is `CommitteeFormed`
        - This will calculate and populate the Members.
        - If the validator address is supposed to join the committee, it inserts a new record in `EnterCommitteeModel`.
        
- ~~RegisterCommitteeDecisionService~~
- PublishEndpointService
    - TODO
- ConfirmDepositService
    - Already implemented
- ProveGatewayService
    - Already implemented
- ConfirmWithdrawService
- ConfirmOpenKernelService
    - This service is triggered by
        - AnchoredStateRoots
    - This service does the following
        - Gets the pending messages from Message repository that are declared on source and undeclated on target, and type is `OpenKernel`.
        - Inserts a new record in `ConfirmOpenKernelModel`
- ProposeMetablockService
    - This service is triggered by
        - Link
    - This service does the following
        - Inserts a new record in `ProposeMetablockModel`
- RegisterVoteService
    - This service is triggered by
        - Link
        - SignedVoteMessage
    - This service does the following
        - Inserts a new record in  `RegisterVoteModel`
- ~~OpenMetablockService~~
- ProposeLinkService
    - This service is triggered by
        - Blocks
    - This service does the following
        - Inserts a new record in `ProposeLinkModel`
- AnchoredStateRootService
    - Already implemented.

- ReportBlockService
    - This service is triggered by
        - Blocks
    - This service does the following
        - Updates the `TransitionObject` model.
        - Inserts a new record in the 
